# node.js + html 实现的微信网页开发

# node.js + html 实现的微信网页开发

标签（空格分隔）： 微信开发

---

本篇主要讲述，如何在微信中打开自家的页面，在然后在用户分享的时候，能由我们自定义分享出去后，展示的页面卡片中的页面标题、页面描述、页面图片和分享链接。

此功能，具体的来说，是：
1. 在微信打开自家的页面
2. 点击右上角微信的功能按钮，出现功能菜单
3. 点击分享给好友、朋友圈、QQ好友等
4. 选择对应的好友，发送
5. 打开对应的好友聊天界面，可以看到，被分享的页面卡片，在展示上和默认的样式有所不同。

如下如所示左侧是我要分享的页面，右侧就是分享出去的页面的卡片，分别是未自定义分享信息和自定义了分享信息：
![](https://ws2.sinaimg.cn/large/006tNc79ly1fzkco6tvqhj30u00v8k11.jpg)

仅在样式上就已经有很所不同，此外最关键的，是分享的url也可以自定义。

默认分享的话，你当前页面的url是什么，那么分享出去就是什么，而自定义的情况，则可以自己定义url，有了极大的灵活性，当然也是还有一些限制，但至少，链接的参数是可以完全自定义的，这个后面文章继续介绍。

### 首先说一下，完成自定义分享信息的，从无到有的流程：

**基础硬件服务：**

- 购买域名，并备案，我是在阿里云购买的，备案需要十几个工作日。
- 购买服务器，和公网ip，域名绑定到这个ip，这个ip绑定到服务器，服务器用来放置前端项目和后台项目，分分钟钟的事情。

阿里云ECS：[https://cn.aliyun.com/product/ecs](https://cn.aliyun.com/product/ecs)

**微信公众平台，开发者认证**

- 打开微信公众平台 [https://mp.weixin.qq.com/](https://mp.weixin.qq.com/)，使用邮箱注册，注意，一个邮箱只能注册一个微信公众平台账号，一个账号只能选择一种账号分类且不能更改，这里一定要慎重，这里选择订阅号。
- 可选个人类型、企业类型等等，其中，个人类型是不没有分享定制功能的，但企业类型我又不符合。。。最终我还是选择的个人类型，因为即使我的账号没有权限，但微信公众号里面，提供一个功能全开的测试账号，使用测试账号可以进行学习和测试，还是没问题的。
- 填写信息，绑定微信，注册完成，登录进去。
- 有两个选择：
 - 直接使用此账号进行开发；
 - 选择使用测试账号；
- 记下开发者ID(AppID)
- 开通记下开发者密码(AppSecret)
- 设置IP白名单，用于允许使用开发者ID和密码，来获取```access_token```
- 设置 => 公众号设置 => 功能设置 => JS接口安全域名，在此处添加你的要使用微信sdk功能的网站的域名，比如```wx.qq.com```或者```wx.qq.com/user```，最多可写三个，且需要验证，验证的方式，就是将一个微信提供的txt文件，放在此域名对应的放置于服务器中的web项目的访问根目录中，需要和主文件（大部分默认为```index.html```）放在同一级，当提交的时候，微信会进行访问，来获取文件，确认此域名是你的。
